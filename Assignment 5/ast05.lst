     1                                 %line 1+1 ast05.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 [section .data]
    20                                 
    21                                 
    22                                 
    23                                 
    24                                 NULL equ 0
    25                                 
    26                                 TRUE equ 1
    27                                 FALSE equ 0
    28                                 
    29                                 EXIT_SUCCESS equ 0
    30                                 SYS_exit equ 60
    31                                 
    32                                 
    33                                 
    34                                 
    35                                 
    36 00000000 DFF2E9F5DE             x1 db -33, -14, -23, -11, -34
    37 00000005 F4F6ABC1FB              db -12, -10, -85, -63, -05
    38 0000000A C0F3E8F3BF              db -64, -13, -24, -13, -65
    39 0000000F D4F4F3F4E9              db -44, -12, -13, -12, -23
    40 00000014 BFC0B7F0DE              db -65, -64, -73, -16, -34
    41 00000019 CBF3D5F3DD              db -53, -13, -43, -13, -35
    42 0000001E D4BBDEDFE0              db -44, -69, -34, -33, -32
    43 00000023 DEE9F1F2FF              db -34, -23, -15, -14, -01
    44 00000028 EAD6DFFEF5              db -22, -42, -33, -02, -11
    45 0000002D E7F2E9D2CA              db -25, -14, -23, -46, -54
    46                                 
    47 00000032 305E3E3F12             y1 db 48, 94, 62, 63, 18
    48 00000037 3D2D341D41              db 61, 45, 52, 29, 65
    49 0000003C 0C0A553F19              db 12, 10, 85, 63, 25
    50 00000041 4C2F37130D              db 76, 47, 55, 19, 13
    51 00000046 1C2D3D4041              db 28, 45, 61, 64, 65
    52 0000004B 4D14382F3D              db 77, 20, 56, 47, 61
    53 00000050 3413413D1F              db 52, 19, 65, 61, 31
    54 00000055 410E170F0E              db 65, 14, 23, 15, 14
    55 0000005A 01470B1515              db 01, 71, 11, 21, 21
    56 0000005F 12191F2237              db 18, 25, 31, 34, 55
    57                                 
    58                                 
    59 00000064 F500EA007B00DF007B-    x2 dw 245, 234, 123, 223, 123
    60 00000064 00                 
    61 0000006E FD009900F3009900EB-     dw 253, 153, 243, 153, 235
    62 0000006E 00                 
    63 00000078 8600EA009C0008018E-     dw 134, 234, 156, 264, 142
    64 00000078 00                 
    65 00000082 FD0099001C018E00EA-     dw 253, 153, 284, 142, 234
    66 00000082 00                 
    67 0000008C F500EA007B00DF007B-     dw 245, 234, 123, 223, 123
    68 0000008C 00                 
    69 00000096 EA0086000001A400F2-     dw 234, 134, 256, 164, 242
    70 00000096 00                 
    71 000000A0 FD00FD00B800F20086-     dw 253, 253, 184, 242, 134
    72 000000A0 00                 
    73 000000AA 0001A400F2008600C9-     dw 256, 164, 242, 134, 201
    74 000000AA 00                 
    75 000000B4 6500DF00AC00CB00B1-     dw 101, 223, 172, 203, 177
    76 000000B4 00                 
    77 000000BE D7007200F3009900FF-     dw 215, 114, 243, 153, 255
    78 000000BE 00                 
    79                                 
    80 000000C8 5D117E12330CCF0BC7-    y2 dw 4445, 4734, 3123, 3023, 1223
    81 000000C8 04                 
    82 000000D2 C10AD9065B11890BA3-     dw 2753, 1753, 4443, 2953, 3235
    83 000000D2 0C                 
    84 000000DC C606960ED0089C12F6-     dw 1734, 3734, 2256, 4764, 4342
    85 000000DC 10                 
    86 000000E6 F102D9060405720D3A-     dw 753, 1753, 1284, 3442, 5434
    87 000000E6 15                 
    88 000000F0 6108AE0A4B08C7047B-     dw 2145, 2734, 2123, 1223, 6523
    89 000000F0 19                 
    90 000000FA 7E12AE0ABC03601CDA-     dw 4734, 2734, 956, 7264, 1242
    91 000000FA 04                 
    92 00000104 D906D906801ABE11DE-     dw 1753, 1753, 6784, 4542, 7134
    93 00000104 1B                 
    94 0000010E C40ACC0AB60A6616B1-     dw 2756, 2764, 2742, 5734, 1201
    95 0000010E 04                 
    96 00000118 5D12BB06EC0604125E-     dw 4701, 1723, 1772, 4612, 3422
    97 00000118 0D                 
    98 00000122 B1062F1A5C164206EE-     dw 1713, 6703, 5724, 1602, 5614
    99 00000122 15                 
   100                                 
   101 0000012C 3200000000000000       length dq 50
   102                                 
   103 00000134 00000000               slpMin dd 0
   104 00000138 00000000               slpEstMed dd 0
   105 0000013C 00000000               slpMax dd 0
   106 00000140 00000000               slpSum dd 0
   107 00000144 00000000               slpAve dd 0
   108                                 
   109 00000148 00000000               dstMin dd 0
   110 0000014C 00000000               dstEstMed dd 0
   111 00000150 00000000               dstMax dd 0
   112 00000154 00000000               dstSum dd 0
   113 00000158 00000000               dstAve dd 0
   114                                 
   115 0000015C 00000000               dstx1x2 dd 0
   116 00000160 00000000               dsty1y2 dd 0
   117                                 
   118                                 
   119                                 
   120                                 
   121                                 [section .bss]
   122                                 
   123 00000000 <gap>                  slopes resd 50
   124 000000C8 <gap>                  distances resd 50
   125 00000190 <gap>                  xMid resw 50
   126 000001F4 <gap>                  yMid resw 50
   127                                 
   128                                 
   129                                 
   130                                 
   131                                 [section .text]
   132                                 [global _start]
   133                                 _start:
   134                                 
   135                                 
   136                                 
   137                                 
   138                                 
   139 00000000 48C7C600000000          mov rsi, 0
   140 00000007 488B0C25[00000000]      mov rcx, qword[length]
   141                                 
   142                                 
   143                                 
   144                                 
   145                                 
   146                                 
   147                                 
   148                                 
   149                                 
   150                                 SlpLoop:
   151                                 
   152                                 
   153                                 
   154                                 
   155 0000000F 0FBF8436[00000000]      movsx eax, word [y2 + rsi * 2]
   156 00000017 0FBE9E[00000000]        movsx ebx, byte [y1 + rsi]
   157                                 
   158 0000001E 29D8                    sub eax, ebx
   159                                 
   160                                 
   161                                 
   162                                 
   163 00000020 440FBF8436[00000000]      movsx r8d, word [x2 + rsi * 2]
   164 00000029 440FBE8E[00000000]      movsx r9d, byte [x1 + rsi]
   165                                 
   166 00000031 4529C8                  sub r8d, r9d
   167                                 
   168                                 
   169                                 
   170                                 
   171                                 
   172                                 
   173                                 
   174 00000034 99                      cdq
   175 00000035 41F7F8                  idiv r8d
   176 00000038 8904B5[00000000]        mov dword [slopes + rsi * 4], eax
   177                                 
   178                                 
   179                                 
   180                                 
   181 0000003F 48FFC6                  inc rsi
   182                                 
   183 00000042 E2C9                   loop SlpLoop
   184                                 
   185                                 
   186                                 
   187                                 
   188 00000044 48C7C600000000          mov rsi, 0
   189 0000004B 488B0C25[00000000]      mov rcx, qword[length]
   190                                 
   191                                 
   192                                 
   193                                 
   194                                 
   195                                 
   196                                 DistLoop:
   197                                 
   198                                 
   199                                 
   200                                 
   201 00000053 66448B8436[00000000]      mov r8w, word [x2 + rsi * 2]
   202 0000005C 66440FBE8E[00000000]      movsx r9w, byte [x1 + rsi]
   203                                 
   204 00000065 664501C8                add r8w, r9w
   205                                 
   206 00000069 664489C0                mov ax, r8w
   207 0000006D 6641F7E8                imul r8w
   208 00000071 66890425[00000000]      mov word [dstx1x2], ax
   209 00000079 66891425[02000000]      mov word [dstx1x2 + 2], dx
   210                                 
   211                                 
   212                                 
   213                                 
   214 00000081 668B8436[00000000]      mov ax, word [y2 + rsi * 2]
   215 00000089 660FBE9E[00000000]      movsx bx, byte [y1 + rsi]
   216                                 
   217 00000091 6601D8                  add ax, bx
   218                                 
   219 00000094 66F7E8                  imul ax
   220 00000097 66890425[00000000]      mov word [dsty1y2], ax
   221 0000009F 66891425[02000000]      mov word [dsty1y2 + 2], dx
   222                                 
   223                                 
   224                                 
   225                                 
   226 000000A7 8B1C25[00000000]        mov ebx, dword [dsty1y2]
   227 000000AE 8B0425[00000000]        mov eax, dword [dstx1x2]
   228 000000B5 01D8                    add eax, ebx
   229                                 
   230 000000B7 F20F2AC0                cvtsi2sd xmm0, eax
   231 000000BB F20F51C0                sqrtsd xmm0, xmm0
   232 000000BF F20F2DC0                cvtsd2si eax, xmm0
   233                                 
   234 000000C3 8904B5[00000000]        mov dword [distances + rsi * 4], eax
   235                                 
   236                                 
   237                                 
   238                                 
   239 000000CA 48FFC6                  inc rsi
   240                                 
   241 000000CD E282                   loop DistLoop
   242                                 
   243                                 
   244                                 
   245                                 
   246 000000CF 48C7C600000000          mov rsi, 0
   247 000000D6 488B0C25[00000000]      mov rcx, qword[length]
   248                                 
   249                                 
   250 000000DE 41BE02000000            mov r14d, 2
   251                                 
   252                                 
   253                                 
   254                                 
   255                                 Midloop:
   256                                 
   257                                 
   258                                 
   259                                 
   260 000000E4 668B8436[00000000]      mov ax, word [x2 + rsi * 2]
   261 000000EC 660FBE9E[00000000]      movsx bx, byte [x1 + rsi]
   262                                 
   263 000000F4 6601D8                  add ax, bx
   264                                 
   265 000000F7 6699                    cwd
   266 000000F9 41F7FE                  idiv r14d
   267                                 
   268 000000FC 66898436[00000000]      mov word [xMid + rsi * 2], ax
   269                                 
   270                                 
   271                                 
   272                                 
   273 00000104 668B8436[00000000]      mov ax, word [y2 + rsi * 2]
   274 0000010C 660FBE9E[00000000]      movsx bx, byte [y1 + rsi]
   275                                 
   276 00000114 6601D8                  add ax, bx
   277                                 
   278 00000117 6699                    cwd
   279 00000119 41F7FE                  idiv r14d
   280                                 
   281 0000011C 66898436[00000000]      mov word [yMid + rsi * 2], ax
   282                                 
   283                                 
   284                                 
   285                                 
   286 00000124 48FFC6                  inc rsi
   287                                 
   288 00000127 E2B9                   loop Midloop
   289                                 
   290                                 
   291                                 
   292                                 
   293 00000129 48C7C3[00000000]        mov rbx, slopes
   294 00000130 48C7C100000000          mov rcx, 0
   295 00000137 488B0C25[00000000]      mov rcx, qword [length]
   296                                 
   297                                 
   298                                 
   299                                 
   300 0000013F 8B0425[00000000]        mov eax, dword [slopes]
   301 00000146 010425[00000000]        add dword [slpEstMed], eax
   302                                 
   303                                 
   304                                 
   305                                 
   306                                 SlpCalcLoop:
   307                                 
   308                                 
   309                                 
   310                                 
   311 0000014D 8B03                    mov eax, dword [rbx]
   312                                 
   313                                 
   314                                 
   315                                 
   316 0000014F 010425[00000000]        add dword [slpSum], eax
   317                                 
   318                                 
   319                                 
   320                                 
   321 00000156 3B0425[00000000]        cmp eax, dword [slpMin]
   322 0000015D 7305                    jae minDone
   323 0000015F 890425[00000000]        mov dword [slpMin], eax
   324                                 
   325                                  minDone:
   326                                 
   327                                 
   328                                 
   329                                 
   330 00000166 3B0425[00000000]        cmp eax, dword [slpMax]
   331 0000016D 7605                    jbe maxDone
   332 0000016F 890425[00000000]        mov dword [slpMax], eax
   333                                 
   334                                  maxDone:
   335                                 
   336                                 
   337                                 
   338                                 
   339 00000176 4883F91A                cmp rcx, 26
   340 0000017A 7505                    jne NotMid
   341 0000017C 010425[00000000]        add dword [slpEstMed], eax
   342                                 
   343                                  NotMid:
   344                                 
   345 00000183 4883F901                cmp rcx, 1
   346 00000187 7505                    jne NotLast
   347 00000189 010425[00000000]        add dword [slpEstMed], eax
   348                                 
   349                                  NotLast:
   350                                 
   351                                 
   352                                 
   353                                 
   354 00000190 4883C304                add rbx, 4
   355                                 
   356 00000194 E2B5                   loop SlpCalcLoop
   357                                 
   358                                 
   359                                 
   360                                 
   361                                 
   362 00000196 8B0425[00000000]        mov eax, dword [slpSum]
   363 0000019D 99                      cdq
   364 0000019E 48F73C25[00000000]      idiv qword [length]
   365 000001A6 890425[00000000]        mov dword [slpAve], eax
   366                                 
   367                                 
   368                                 
   369                                 
   370 000001AD 8B0425[00000000]        mov eax, dword [slpEstMed]
   371 000001B4 99                      cdq
   372 000001B5 B903000000              mov ecx, 3
   373 000001BA F7F9                    idiv ecx
   374 000001BC 890425[00000000]        mov dword [slpEstMed], eax
   375                                 
   376                                 
   377                                 
   378                                 
   379 000001C3 48C7C3[00000000]        mov rbx, distances
   380 000001CA 48C7C100000000          mov rcx, 0
   381 000001D1 488B0C25[00000000]      mov rcx, qword [length]
   382                                 
   383                                 
   384                                 
   385                                 
   386 000001D9 8B0425[00000000]        mov eax, dword [distances]
   387 000001E0 010425[00000000]        add dword [dstEstMed], eax
   388                                 
   389                                 
   390                                 
   391                                 
   392                                 DistCalcLoop:
   393                                 
   394                                 
   395                                 
   396                                 
   397 000001E7 8B03                    mov eax, dword [rbx]
   398                                 
   399                                 
   400                                 
   401                                 
   402 000001E9 010425[00000000]        add dword [dstSum], eax
   403                                 
   404                                 
   405                                 
   406                                 
   407 000001F0 3B0425[00000000]        cmp eax, dword [dstMin]
   408 000001F7 7305                    jae dstminDone
   409 000001F9 890425[00000000]        mov dword [dstMin], eax
   410                                 
   411                                  dstminDone:
   412                                 
   413                                 
   414                                 
   415                                 
   416 00000200 3B0425[00000000]        cmp eax, dword [dstMax]
   417 00000207 7605                    jbe dstmaxDone
   418 00000209 890425[00000000]        mov dword [dstMax], eax
   419                                 
   420                                  dstmaxDone:
   421                                 
   422                                 
   423                                 
   424                                 
   425 00000210 4883F91A                cmp rcx, 26
   426 00000214 7505                    jne dstNotMid
   427 00000216 010425[00000000]        add dword [dstEstMed], eax
   428                                 
   429                                  dstNotMid:
   430                                 
   431 0000021D 4883F901                cmp rcx, 1
   432 00000221 7505                    jne dstNotLast
   433 00000223 010425[00000000]        add dword [dstEstMed], eax
   434                                 
   435                                  dstNotLast:
   436                                 
   437                                 
   438                                 
   439                                 
   440 0000022A 4883C304                add rbx, 4
   441                                 
   442 0000022E E2B5                   loop DistCalcLoop
   443                                 
   444                                 
   445                                 
   446                                 
   447 00000230 8B0425[00000000]        mov eax, dword [dstSum]
   448 00000237 99                      cdq
   449 00000238 48F73C25[00000000]      idiv qword [length]
   450 00000240 890425[00000000]        mov dword [dstAve], eax
   451                                 
   452                                 
   453                                 
   454                                 
   455 00000247 8B0425[00000000]        mov eax, dword [dstEstMed]
   456 0000024E 99                      cdq
   457 0000024F B903000000              mov ecx, 3
   458 00000254 F7F9                    idiv ecx
   459 00000256 890425[00000000]        mov dword [dstEstMed], eax
   460                                 
   461                                 
   462                                 
   463                                 
   464                                 last:
   465 0000025D B83C000000              mov eax, SYS_exit
   466 00000262 BB00000000              mov ebx, EXIT_SUCCESS
   467 00000267 0F05                    syscall
   468                                 
